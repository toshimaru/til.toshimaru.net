---
title: 2023-01-26 Rails redirect in routing
categories: rails
---

Railsのルーティングで `redirect` するときの書き方をメモ。

参考. [ActionDispatch::Routing::Redirection \| RailsDoc(β)](https://railsdoc.github.io/classes/ActionDispatch/Routing/Redirection.html)

## すべてをリダイレクト

```rb
get "/stories" => redirect("/posts")
```

上記の場合、クエリパラメータが付いていようどうだろうが `/posts` へとリダイレクトを行う。


## リダイレクト時のステータスコード指定

```rb
get "/stories" => redirect("/posts", status: 307)
```

デフォルトだと 301 redirect になるが、上記のようにステータスコードを指定可能。

## パラメータを受けてリダレクト

```rb
get 'docs/:article', to: redirect('/wiki/%{article}')
```

`:article` に指定された部分を受けて、それを引き継いだ上で別のパスへとリダイレクト。


## パスのみリダイレクト

```rb
get '/stories', to: redirect(path: '/posts')
```

パスのみ変換。上記の場合、クエリパラメータを引き継ぐことができる。


## サブドメインへのリダイレクト

```rb
get 'stores/:name', to: redirect(subdomain: 'stores', path: '/%{name}')
```

パス指定をサブドメインに変換してくれる書き方。
